/*********************************************************************
 * 版权所有: Copyright (c) 2020-2021  XXX Company. All rights reserved.
 * 系统名称: 
 * 文件名称: gpt.c
 * 内容摘要: 简要描述本文件的内容，包括主要模块、函数及其功能的说明
 * 当前版本: 
 * 作    者: HJWang
 * 设计日期: 2020-09-20 11:03
 * 修改记录: 
 * 日    期          版    本          修改人          修改摘要
**********************************************************************/




/********************************** 标准库头文件 ***********************************/
//#include <xxx.h>


/********************************** 非标准库头文件 ***********************************/
#include "xxx.h"


/********************************** 常量定义 ***********************************/


/********************************** 文件内部使用的宏 ***********************************/


/********************************** 文件内部使用的数据类型 ***********************************/


/********************************** 静态全局变量 ***********************************/


/********************************** 全局变量 ***********************************/


/********************************** 局部函数声明 ***********************************/


/********************************** 局部函数 ***********************************/


/********************************** 全局函数 ***********************************/


/********************************** 类的实现 ***********************************/
GPT_Type GPT1;

void GPT_Init(void)
{
	GPT1->CR = 0;					/*清零*/
	GPT1->CR = 1 << 15;				/*进入软复位*/
	while ((GPT1->CR >> 15) & 0x01);	/*等待复位完成*/

	/*
		GPT的CR寄存器，GPT通用设置
		bit【22:20】: 000 输出比较的输出功能关闭，也就是对应的引脚没有反应
		bit9; 0 Restart模式，当cnt等于OCR1的时候产生中断
		bit8:6: 001 GPT时钟源选择 ipg_clk=66Mhz
	*/
	GPT1->CR = (1 << 6);

	/*GPT_RP GPT预分频设置
		bit11:0 ： 66
	*/
	GPT1->PR = 65;

	/*
	GPT_OCR1寄存器， GPT的输出比较1比较计数值
	GPT的时钟为1MZ，那么计数器一个值就是1us
	*/
	GPT1->OCR[1] = 0xFFFFFFFF;
	GPT1->CR = 1 << 0;				/*使能GPT1*/
}



